<template>
  <ElCard class="mb-4">
    <template #header>
      <h4>ğŸ“¦ Node.js å®‰è£…æŒ‡å—</h4>
    </template>
    <div class="nodejs-install-content">
      <p class="text-muted mb-3">å¦‚æœæ‚¨è¿˜æ²¡æœ‰å®‰è£…Node.jsï¼Œè¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å®‰è£…ï¼š</p>

      <div class="nodejs-methods">
        <ElTabs v-model="nodeInstallMethod" type="card">
          <!-- Windows Node.jså®‰è£… -->
          <ElTabPane label="Windows" name="windows-node">
            <div class="nodejs-method">
              <h5>ğŸªŸ å®˜æ–¹å®‰è£…åŒ…ï¼ˆæ¨èï¼‰</h5>
              <p class="method-desc">ä¸‹è½½å®˜æ–¹å®‰è£…åŒ…ï¼Œå‚»ç“œå¼å®‰è£…</p>
              <div class="install-steps">
                <ol>
                  <li>è®¿é—® <a href="https://nodejs.org" target="_blank" class="link-primary">https://nodejs.org</a></li>
                  <li>ä¸‹è½½LTSç‰ˆæœ¬ï¼ˆé•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼‰</li>
                  <li>è¿è¡Œä¸‹è½½çš„.msiæ–‡ä»¶</li>
                  <li>æŒ‰ç…§å®‰è£…å‘å¯¼å®Œæˆå®‰è£…</li>
                </ol>
              </div>
            </div>
          </ElTabPane>

          <!-- macOS Node.jså®‰è£… -->
          <ElTabPane label="macOS" name="macos-node">
            <div class="nodejs-method">
              <h5>ğŸ å®˜æ–¹å®‰è£…åŒ…</h5>
              <p class="method-desc">ä¸‹è½½å®˜æ–¹pkgåŒ…å®‰è£…</p>
              <div class="install-steps">
                <ol>
                  <li>è®¿é—® <a href="https://nodejs.org" target="_blank" class="link-primary">https://nodejs.org</a></li>
                  <li>ä¸‹è½½LTSç‰ˆæœ¬çš„.pkgæ–‡ä»¶</li>
                  <li>åŒå‡»è¿è¡Œå®‰è£…åŒ…</li>
                  <li>æŒ‰ç…§å®‰è£…å‘å¯¼å®Œæˆå®‰è£…</li>
                </ol>
              </div>

              <h5 class="mt-4">ğŸº Homebrewå®‰è£…ï¼ˆæ¨èï¼‰</h5>
              <p class="method-desc">ä½¿ç”¨macOSåŒ…ç®¡ç†å™¨</p>
              <div class="code-block">
                <div class="code-header">
                  <span>Terminal</span>
                  <ElButton size="small" @click="copyToClipboard('brew install node')">å¤åˆ¶</ElButton>
                </div>
                <pre><code>brew install node</code></pre>
              </div>
            </div>
          </ElTabPane>

          <!-- Linux Node.jså®‰è£… -->
          <ElTabPane label="Linux" name="linux-node">
            <div class="nodejs-method">
              <h5>ğŸ“¦ åŒ…ç®¡ç†å™¨å®‰è£…</h5>
              <p class="method-desc">ä½¿ç”¨ç³»ç»ŸåŒ…ç®¡ç†å™¨å®‰è£…</p>

              <div class="linux-distros">
                <div class="distro-item">
                  <h6>Ubuntu/Debian:</h6>
                  <div class="code-block">
                    <div class="code-header">
                      <span>Terminal</span>
                      <ElButton size="small" @click="copyToClipboard('curl -fsSL https://deb.nodesource.com/setup_lts.x | sudo -E bash -\\nsudo apt-get install -y nodejs')">å¤åˆ¶</ElButton>
                    </div>
                    <pre><code>curl -fsSL https://deb.nodesource.com/setup_lts.x | sudo -E bash -
sudo apt-get install -y nodejs</code></pre>
                  </div>
                </div>

                <div class="distro-item">
                  <h6>CentOS/RHEL/Fedora:</h6>
                  <div class="code-block">
                    <div class="code-header">
                      <span>Terminal</span>
                      <ElButton size="small" @click="copyToClipboard('curl -fsSL https://rpm.nodesource.com/setup_lts.x | sudo bash -\\nsudo yum install -y nodejs')">å¤åˆ¶</ElButton>
                    </div>
                    <pre><code>curl -fsSL https://rpm.nodesource.com/setup_lts.x | sudo bash -
sudo yum install -y nodejs</code></pre>
                  </div>
                </div>

                <div class="distro-item">
                  <h6>Arch Linux:</h6>
                  <div class="code-block">
                    <div class="code-header">
                      <span>Terminal</span>
                      <ElButton size="small" @click="copyToClipboard('sudo pacman -S nodejs npm')">å¤åˆ¶</ElButton>
                    </div>
                    <pre><code>sudo pacman -S nodejs npm</code></pre>
                  </div>
                </div>
              </div>
            </div>
          </ElTabPane>
        </ElTabs>
      </div>

      <!-- Node.jså®‰è£…éªŒè¯ -->
      <div class="nodejs-verification mt-4">
        <h5>âœ… éªŒè¯Node.jså®‰è£…</h5>
        <p class="text-muted mb-3">å®‰è£…å®Œæˆåï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ç¡®è®¤å®‰è£…æˆåŠŸï¼š</p>

        <div class="verification-steps">
          <div class="verification-step">
            <h6>1ï¸âƒ£ éªŒè¯ Node.js å®‰è£…</h6>
            <div class="code-block">
              <div class="code-header">
                <span>ç»ˆç«¯/å‘½ä»¤æç¤ºç¬¦</span>
                <ElButton size="small" @click="copyToClipboard('node --version')">å¤åˆ¶</ElButton>
              </div>
              <pre><code>node --version</code></pre>
            </div>
            <div class="expected-output">
              <p><strong>æœŸæœ›è¾“å‡ºï¼š</strong> <code>v18.x.x</code> æˆ–æ›´é«˜ç‰ˆæœ¬</p>
            </div>
          </div>

          <div class="verification-step">
            <h6>2ï¸âƒ£ éªŒè¯ NPM å®‰è£…</h6>
            <div class="code-block">
              <div class="code-header">
                <span>ç»ˆç«¯/å‘½ä»¤æç¤ºç¬¦</span>
                <ElButton size="small" @click="copyToClipboard('npm --version')">å¤åˆ¶</ElButton>
              </div>
              <pre><code>npm --version</code></pre>
            </div>
            <div class="expected-output">
              <p><strong>æœŸæœ›è¾“å‡ºï¼š</strong> <code>9.x.x</code> æˆ–æ›´é«˜ç‰ˆæœ¬</p>
            </div>
          </div>
        </div>

        <div class="nodejs-troubleshooting mt-3">
          <h6>ğŸ”§ å¸¸è§é—®é¢˜</h6>
          <div class="troubleshooting-items">
            <div class="troubleshooting-item">
              <strong>âŒ å‘½ä»¤æœªæ‰¾åˆ°ï¼š</strong>
              <ul>
                <li>é‡æ–°å¯åŠ¨ç»ˆç«¯/å‘½ä»¤æç¤ºç¬¦</li>
                <li>Windowsç”¨æˆ·å¯èƒ½éœ€è¦é‡å¯è®¡ç®—æœº</li>
                <li>ç¡®è®¤å®‰è£…è·¯å¾„å·²æ·»åŠ åˆ°ç³»ç»ŸPATHç¯å¢ƒå˜é‡</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ElCard>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import { ElCard, ElButton, ElTabs, ElTabPane, ElMessage } from 'element-plus'

const nodeInstallMethod = ref('windows-node')

const copyToClipboard = async (text: string) => {
  try {
    await navigator.clipboard.writeText(text)
    ElMessage.success('å¤åˆ¶æˆåŠŸ')
  } catch (error) {
    ElMessage.error('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶')
  }
}
</script>

<style scoped>
.nodejs-install-content {
  padding: 10px 0;
}

.nodejs-method {
  padding: 10px 0;
}

.nodejs-method h5 {
  color: #2c3e50;
  margin-bottom: 8px;
}

.method-desc {
  color: #666;
  margin-bottom: 15px;
  font-size: 0.9rem;
}

.install-steps ol {
  margin: 0;
  padding-left: 20px;
}

.install-steps li {
  margin-bottom: 8px;
  line-height: 1.6;
}

.linux-distros {
  margin-top: 20px;
}

.distro-item {
  margin-bottom: 20px;
}

.distro-item h6 {
  color: #2c3e50;
  margin-bottom: 10px;
}

.code-block {
  background: #1e1e1e;
  border-radius: 6px;
  overflow: hidden;
  margin-bottom: 10px;
  border: 1px solid #333;
}

.code-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 12px;
  background: #2d2d2d;
  border-bottom: 1px solid #444;
}

.code-header span {
  font-size: 0.8rem;
  color: #ccc;
}

.code-block pre {
  margin: 0;
  padding: 12px;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: 0.9rem;
  line-height: 1.4;
  color: #e6e6e6;
}

.nodejs-verification {
  border-top: 1px solid #e9ecef;
  padding-top: 20px;
}

.verification-steps {
  margin-top: 15px;
}

.verification-step {
  margin-bottom: 20px;
}

.verification-step h6 {
  color: #2c3e50;
  margin-bottom: 10px;
}

.expected-output {
  margin-top: 8px;
  padding: 8px 12px;
  background: #e7f3ff;
  border-radius: 4px;
  border-left: 3px solid #1890ff;
}

.expected-output p {
  margin: 0;
  font-size: 0.9rem;
}

.nodejs-troubleshooting {
  background: #fff3cd;
  padding: 15px;
  border-radius: 6px;
  border-left: 4px solid #ffc107;
}

.nodejs-troubleshooting h6 {
  color: #856404;
  margin-bottom: 10px;
}

.troubleshooting-items {
  font-size: 0.9rem;
}

.troubleshooting-item {
  margin-bottom: 10px;
}

.troubleshooting-item strong {
  color: #856404;
}

.troubleshooting-item ul {
  margin: 5px 0 0 20px;
}

.troubleshooting-item li {
  margin-bottom: 4px;
}

.link-primary {
  color: #1890ff;
  text-decoration: none;
}

.link-primary:hover {
  text-decoration: underline;
}
</style>