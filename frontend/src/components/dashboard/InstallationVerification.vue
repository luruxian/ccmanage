<template>
  <div class="claude-verification mt-4">
    <h5>âœ… éªŒè¯Claude Codeå®‰è£…</h5>
    <p class="text-muted mb-3">å®‰è£…å®Œæˆåï¼Œè¯·è¿è¡Œä»¥ä¸‹å‘½ä»¤ç¡®è®¤Claude Codeå®‰è£…æˆåŠŸï¼š</p>

    <div class="verification-steps">
      <div class="verification-step">
        <h6>1ï¸âƒ£ éªŒè¯ Claude Code å®‰è£…</h6>
        <div class="code-block">
          <div class="code-header">
            <span>ç»ˆç«¯/å‘½ä»¤æç¤ºç¬¦</span>
            <ElButton size="small" @click="copyToClipboard('claude --version')">å¤åˆ¶</ElButton>
          </div>
          <pre><code>claude --version</code></pre>
        </div>
        <div class="expected-output">
          <p><strong>æœŸæœ›è¾“å‡ºï¼š</strong> Claude Codeç‰ˆæœ¬ä¿¡æ¯</p>
        </div>
      </div>

      <div class="verification-step">
        <h6>2ï¸âƒ£ æµ‹è¯• Claude Code åŠŸèƒ½</h6>
        <div class="code-block">
          <div class="code-header">
            <span>ç»ˆç«¯/å‘½ä»¤æç¤ºç¬¦</span>
            <ElButton size="small" @click="copyToClipboard('claude /help')">å¤åˆ¶</ElButton>
          </div>
          <pre><code>claude /help</code></pre>
        </div>
        <div class="expected-output">
          <p><strong>æœŸæœ›è¾“å‡ºï¼š</strong> Claude Codeå¸®åŠ©ä¿¡æ¯å’Œå¯ç”¨å‘½ä»¤åˆ—è¡¨</p>
        </div>
      </div>
    </div>

    <div class="claude-troubleshooting mt-3">
      <h6>ğŸ”§ å¸¸è§é—®é¢˜</h6>
      <div class="troubleshooting-items">
        <div class="troubleshooting-item">
          <strong>âŒ å‘½ä»¤æœªæ‰¾åˆ°ï¼š</strong>
          <ul>
            <li>é‡æ–°å¯åŠ¨ç»ˆç«¯/å‘½ä»¤æç¤ºç¬¦</li>
            <li>ç¡®è®¤å®‰è£…è·¯å¾„å·²æ·»åŠ åˆ°ç³»ç»ŸPATHç¯å¢ƒå˜é‡</li>
            <li>Windowsç”¨æˆ·å¯èƒ½éœ€è¦é‡å¯è®¡ç®—æœº</li>
          </ul>
        </div>
        <div class="troubleshooting-item">
          <strong>âŒ æƒé™é”™è¯¯ï¼š</strong>
          <ul>
            <li>ä½¿ç”¨ç®¡ç†å‘˜æƒé™è¿è¡Œç»ˆç«¯</li>
            <li>Linux/macOSç”¨æˆ·å¯èƒ½éœ€è¦ä½¿ç”¨ <code>sudo</code></li>
          </ul>
        </div>
        <div class="troubleshooting-item">
          <strong>âŒ ç‰ˆæœ¬è¿‡ä½ï¼š</strong>
          <ul>
            <li>è¿è¡Œ <code>npm update -g @anthropic-ai/claude-code</code> æ›´æ–°Claude Code</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ElButton, ElMessage } from 'element-plus'

const copyToClipboard = async (text: string) => {
  try {
    await navigator.clipboard.writeText(text)
    ElMessage.success('å¤åˆ¶æˆåŠŸ')
  } catch (error) {
    ElMessage.error('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶')
  }
}
</script>

<style scoped>
.claude-verification {
  border-top: 1px solid #e9ecef;
  padding-top: 20px;
}

.verification-steps {
  margin-top: 15px;
}

.verification-step {
  margin-bottom: 20px;
}

.verification-step h6 {
  color: #2c3e50;
  margin-bottom: 10px;
}

.code-block {
  background: #f8f9fa;
  border-radius: 6px;
  overflow: hidden;
  margin-bottom: 10px;
}

.code-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 12px;
  background: #e9ecef;
  border-bottom: 1px solid #dee2e6;
}

.code-header span {
  font-size: 0.8rem;
  color: #6c757d;
}

.code-block pre {
  margin: 0;
  padding: 12px;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: 0.9rem;
  line-height: 1.4;
}

.expected-output {
  margin-top: 8px;
  padding: 8px 12px;
  background: #e7f3ff;
  border-radius: 4px;
  border-left: 3px solid #1890ff;
}

.expected-output p {
  margin: 0;
  font-size: 0.9rem;
}

.claude-troubleshooting {
  background: #fff3cd;
  padding: 15px;
  border-radius: 6px;
  border-left: 4px solid #ffc107;
}

.claude-troubleshooting h6 {
  color: #856404;
  margin-bottom: 10px;
}

.troubleshooting-items {
  font-size: 0.9rem;
}

.troubleshooting-item {
  margin-bottom: 10px;
}

.troubleshooting-item strong {
  color: #856404;
}

.troubleshooting-item ul {
  margin: 5px 0 0 20px;
}

.troubleshooting-item li {
  margin-bottom: 4px;
}

.troubleshooting-item code {
  background: #f1f3f4;
  padding: 2px 6px;
  border-radius: 3px;
  font-size: 0.85rem;
}
</style>